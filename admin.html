<!DOCTYPE html>
<html>
<head>
  <title>Admin Setting System</title>
</head>
<body>
<h2>Admin Exam Builder</h2>

<input id="title" placeholder="Exam Title"><br><br>
<textarea id="question" placeholder="Question"></textarea><br>

<select id="type">
  <option value="SINGLE">Single Choice</option>
  <option value="FILL">Fill in the Blanks</option>
  <option value="ESSAY">Essay</option>
</select><br>

<textarea id="options" placeholder="Options (comma separated)"></textarea><br>
<button onclick="addQuestion()">Add Question</button><br><br>

<button onclick="publish()">Publish to GitHub</button>

<pre id="output"></pre>

<script>
let questions = [];

function addQuestion() {
  questions.push({
    qnum: questions.length + 1,
    question: document.getElementById("question").value,
    type: document.getElementById("type").value,
    options: document.getElementById("options").value.split(',')
  });
  document.getElementById("output").innerText = JSON.stringify(questions, null, 2);
}

async function publish() {
  const token = prompt("Enter GitHub Token");
  const body = {
    public: true,
    files: {
      "exam.json": {
        content: JSON.stringify({ title: title.value, questions }, null, 2)
      }
    }
  };

  const res = await fetch("https://api.github.com/gists", {
    method: "POST",
    headers: {
      "Authorization": "token " + token,
      "Content-Type": "application/json"
    },
    body: JSON.stringify(body)
  });

  const data = await res.json();
  alert("Published! Gist ID: " + data.id);
}
</script>
</body>
</html>