<!DOCTYPE html>
<html>
<head>
  <title>Student Exam System</title>
</head>
<body>
<h2>Student Exam</h2>

<input id="gistId" placeholder="Enter Gist ID">
<button onclick="loadExam()">Load Exam</button>

<div id="exam"></div>
<button onclick="submit()">Submit</button>

<script>
let examData = {};
let answers = {};

async function loadExam() {
  const id = document.getElementById("gistId").value;
  const res = await fetch(`https://api.github.com/gists/${id}`);
  const data = await res.json();

  const file = Object.values(data.files)[0];
  examData = JSON.parse(file.content);

  let html = `<h3>${examData.title}</h3>`;

  examData.questions.forEach(q => {
    html += `<p>${q.qnum}. ${q.question}</p>`;

    if (q.type === "SINGLE") {
      q.options.forEach(opt => {
        html += `<input type="radio" name="${q.qnum}" onclick="answers[${q.qnum}]='${opt}'"> ${opt}<br>`;
      });
    }

    if (q.type === "FILL") {
      html += `<input oninput="answers[${q.qnum}]=this.value"><br>`;
    }

    if (q.type === "ESSAY") {
      html += `<textarea oninput="answers[${q.qnum}]=this.value"></textarea><br>`;
    }
  });

  document.getElementById("exam").innerHTML = html;
}

function submit() {
  alert(JSON.stringify(answers, null, 2));
}
</script>
</body>
</html>