<!doctype html>
<html lang="zh-Hant">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>Notebook Embed</title>
		<style>
			body { font-family: Arial, sans-serif; margin: 24px; }
			.frame-wrap { width: 100%; height: 80vh; border: 1px solid #ddd; }
			.fallback { margin-top: 12px; }
		</style>
	</head>
	<body>
		<iframe id="nbframe" src="test_notebook.html" title="test_notebook.html" frameborder="0" aria-label="Embedded notebook"></iframe>

		<script>
		// 自動調整 iframe 高度以配合內容（若同源可讀取內容高度）
		function adjustIframe() {
			const ifr = document.getElementById('nbframe');
			if (!ifr) return;
			// 預設為視窗高度，避免在無法存取內容時顯示空白
			ifr.style.width = '100%';
			ifr.style.display = 'block';
			ifr.style.border = '0';
			try {
				const doc = ifr.contentDocument || ifr.contentWindow.document;
				const height = Math.max(doc.documentElement.scrollHeight || 0, doc.body.scrollHeight || 0, doc.documentElement.offsetHeight || 0);
				if (height && height > 0) {
					ifr.style.height = height + 'px';
				} else {
					ifr.style.height = window.innerHeight + 'px';
				}
			} catch (e) {
				// cross-origin 或其他無法存取情況：使用視窗高度（內部會產生滾動）
				ifr.style.height = window.innerHeight + 'px';
			}
		}

		window.addEventListener('DOMContentLoaded', function () {
			const ifr = document.getElementById('nbframe');
			if (!ifr) return;
			ifr.style.minHeight = '100vh';
			// 在 iframe 加載完成時嘗試調整高度
			ifr.addEventListener('load', function () {
				adjustIframe();
				// 若內容載入後有遲到的資源，延遲再次調整
				setTimeout(adjustIframe, 500);
			});
			window.addEventListener('resize', adjustIframe);
			// 嘗試首次調整
			adjustIframe();
		});
		</script>
	</body>
</html>

