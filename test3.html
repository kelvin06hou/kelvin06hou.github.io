<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Dual Code Editor (C++ & Python)</title>
<link rel="stylesheet" href="test3.css" type="text/css">
</head>
<body>

<div class="header">Dual Code Editor (C++ & Python)</div>

<div class="tabs">
    <div class="tab active" onclick="switchTab('cpp')">C++</div>
    <div class="tab" onclick="switchTab('python')">Python</div>
</div>

<!-- C++ Editor -->
<div id="cpp" class="editor-container active">
    <h3>C++ Code</h3>
    <textarea id="cpp-code">#include <iostream>
using namespace std;
int main(){
    cout << "Hello from C++";
    return 0;
}
</textarea>
    <button class="run-btn" onclick="runCode('cpp')">Run C++</button>
    <div id="cpp-output" class="output-box">C++ output will appear here…</div>
</div>

<!-- Python Editor -->
<div id="python" class="editor-container">
    <h3>Python Code</h3>
    <textarea id="python-code">print("Hello from Python")</textarea>
    <button class="run-btn" onclick="runCode('python')">Run Python</button>
    <div id="python-output" class="output-box">Python output will appear here…</div>
</div>

<script>
function switchTab(lang) {
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.editor-container').forEach(ec => ec.classList.remove('active'));

    document.querySelector(`.tab:nth-child(${lang === 'cpp' ? 1 : 2})`).classList.add('active');
    document.getElementById(lang).classList.add('active');
}

// Black-box test cases
const testCases = [
    { input: "5", expected: "10" },
    { input: "2", expected: "4" },
    { input: "-3", expected: "-6" }
];

async function runCode(lang) {
    let code = document.getElementById(lang + "-code").value;

    let results = "";
    let passedCount = 0;

    for (let i = 0; i < testCases.length; i++) {
        let input = testCases[i].input;
        let expected = testCases[i].expected;

        // Send code + test input to backend
        let res = await fetch("run_code.php", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
                language: lang,
                code: code,
                input: input
            })
        });

        let output = (await res.text()).trim();

        if (output === expected) {
            results += `Test ${i+1}: PASS\n`;
            passedCount++;
        } else {
            results += `Test ${i+1}: FAIL (expected ${expected}, got ${output})\n`;
        }
    }

    results += `\nTotal Passed: ${passedCount}/${testCases.length}`;

    document.getElementById(lang + "-output").textContent = results;
}


/*
function runCode(lang) {
    let code = document.getElementById(lang + "-code").value;

    // Placeholder: In a real system, send code to backend compiler.
    // For now, just simulate output.
    let output;

    if (lang === "cpp") {
        output = "[Simulated C++ execution]\n" + code.substring(0, 200);
    } else {
        output = "[Simulated Python execution]\n" + code.substring(0, 200);
    }

    document.getElementById(lang + "-output").textContent = output;
}
*/
</script>

</body>
</html>